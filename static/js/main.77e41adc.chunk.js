(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{106:function(e,t,a){},140:function(e,t,a){e.exports=a(172)},145:function(e,t,a){},149:function(e,t,a){},172:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),i=a(8),o=a.n(i);a(145),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var l=a(12),c=a(35),s=(a(149),a(205)),u=a(219),m=a(208),d=a(209),p=a(210),b=a(217),f=a(218),E=Object(s.a)((function(e){return Object(u.a)({btn:{margin:e.spacing(1),color:"#e4b61a",borderColor:"#e4b61a",textDecoration:"none"}})})),g=function(e){var t=e.link,a=e.name,r=E();return n.a.createElement(c.b,{to:t,style:{textDecoration:"none"}},n.a.createElement(f.a,{variant:"outlined",className:r.btn,size:"small"},a))},v=Object(s.a)((function(e){return Object(u.a)({marginAutoItem:{margin:"auto"},navbar:{backgroundColor:"#2c3258"},btn:{margin:e.spacing(1),color:"#e4b61a",borderColor:"#e4b61a",textDecoration:"none"}})})),h=function(){var e=v();return n.a.createElement(m.a,{position:"static",className:e.navbar},n.a.createElement(d.a,null,n.a.createElement(p.a,{variant:"h6"},"Cards"),n.a.createElement(b.a,{className:e.marginAutoItem},n.a.createElement(g,{link:"/profile",name:"Profile"}),n.a.createElement(g,{link:"/login",name:"login"}),n.a.createElement(g,{link:"/register",name:"register"}),n.a.createElement(g,{link:"/passwordRecovery",name:"Recovery"}),n.a.createElement(g,{link:"/set-new-password",name:"New password"}))))},w=a(13),O=a(45),y=a(73),j=a.n(y),S=a(91),R=a(9),C=a(127),k=a.n(C).a.create({withCredentials:!0,baseURL:"https://neko-back.herokuapp.com/2.0"}),T=function(e){return k.post("/auth/forgot/",{email:e,from:"password-reset-server <noreply@noreply.it>",message:"\n\t\t\t\t\t<div style=\"background-color: lime; padding: 15px\">\n\t\t\t\t\tpassword recovery link: \n\t\t\t\t\t<a href='http://localhost:3000/#/set-new-password/$token$'>link</a>\n\t\t\t\t\t</div>\n\t\t\t\t\t"})},A=function(e,t){return k.post("/auth/set-new-password",{password:e,resetPasswordToken:t})},P=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return k.post("auth/login",{email:e,password:t,rememberMe:a})},I=function(){return k.delete("auth/me")},N=function(e){return k.post("/auth/register",Object(R.a)({},e))},x={isAuth:!1,userProfile:{_id:"",email:"",name:"",avatar:"",publicCardPacksCount:0,created:"YYYY-MM-DD",updated:"YYYY-MM-DD",isAdmin:!1,verified:!1,rememberMe:!1,error:""}},_=function(e){return{type:"login/SET_USER_DATA",data:e}},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"login/SET_USER_DATA":return Object(R.a)({},e,{userProfile:t.data,isAuth:!0});case"login/LOGOUT":return Object(R.a)({},e,{isAuth:!1});case"login/AUTH-ME":return Object(R.a)({},e,{isAuth:t.isAuth,userProfile:t.userProfile});default:return e}},M=function(){return Object(l.c)((function(e){return e.login.isAuth}))?n.a.createElement(w.a,{to:"/profile"}):n.a.createElement("div",null,"LoginPage",n.a.createElement(q,null))},q=function(){var e=Object(l.b)(),t=Object(O.a)({initialValues:{email:"",password:"",rememberMe:!1},onSubmit:function(t){var a=t.email,r=t.password,n=t.rememberMe;e(function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(r){P(e,t,a).then((function(e){r(_(e.data))}))}}(a,r,n)),console.log(JSON.stringify(t,null,2))}});return n.a.createElement(n.a.Fragment,null,n.a.createElement("form",{onSubmit:t.handleSubmit},n.a.createElement("label",{htmlFor:"email"},"Email Address"),n.a.createElement("input",{id:"email",name:"email",type:"email",onChange:t.handleChange,value:t.values.email}),n.a.createElement("label",{htmlFor:"password"},"password"),n.a.createElement("input",{id:"password",name:"password",type:"password",onChange:t.handleChange,value:t.values.password}),n.a.createElement("label",{htmlFor:"rememberMe"},"772316772316 rememberMe"),n.a.createElement("input",{id:"rememberMe",name:"rememberMe",type:"checkbox",onChange:t.handleChange,value:t.values.rememberMe}),n.a.createElement("button",{type:"submit"},"Log in")))},U=a(211),L=a(220),F=a(212),Y=a(213),G=a(216),B={isRegistered:!1},W=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.register.isRegistered})),a=Object(O.a)({validate:function(e){return e.email?e.password?void 0:{password:"Password is required"}:{email:"Email is required"}},initialValues:{email:"",password:""},onSubmit:function(t){var a;e((a=t,function(){var e=Object(S.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=1,e.next=4,N(a);case 4:e.sent,t({type:"register/SET-IS-REGISTERED",value:!0}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()))}});return t?n.a.createElement(w.a,{to:"/login"}):n.a.createElement(U.a,{container:!0,justify:"center"},n.a.createElement(U.a,{item:!0,xs:4},n.a.createElement("form",{onSubmit:a.handleSubmit},n.a.createElement(L.a,null,n.a.createElement(F.a,null,n.a.createElement("p",null,"Registration")),n.a.createElement(Y.a,null,n.a.createElement(G.a,Object.assign({label:"Email",margin:"normal"},a.getFieldProps("email"))),a.errors.email?n.a.createElement("div",null,a.errors.email):null,n.a.createElement(G.a,Object.assign({type:"password",label:"Password",margin:"normal"},a.getFieldProps("password"))),a.errors.password?n.a.createElement("div",null,a.errors.email):null,n.a.createElement(f.a,{type:"submit",variant:"contained",color:"primary"},"Register"))))))},z=a(95),V={error:"",success:!1,loading:!1},Z=function(e){return{type:"pwRecovery/SET_ERROR",error:e}},$=function(e){return{type:"pwRecovery/SET_SUCCESS",success:e}},J=function(e){return{type:"pwRecovery/SET_LOADING",loading:e}},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"pwRecovery/SET_ERROR":return Object(R.a)({},e,{error:t.error});case"pwRecovery/SET_SUCCESS":return Object(R.a)({},e,{success:t.success});case"pwRecovery/SET_LOADING":return Object(R.a)({},e,{loading:t.loading});default:return e}},K=a(4),Q=Object(K.a)({root:{"& input:valid + fieldset":{borderColor:"green",borderWidth:2},"& input:valid:focus + fieldset":{borderLeftWidth:6,padding:"4px !important"}}})(G.a),X=Object(s.a)((function(e){return{input:{marginBottom:"10px"}}})),ee=function(e){var t=e.error,a=void 0!==t&&t,r=e.formik,i=e.type,o=e.label,l=X();return n.a.createElement(Q,Object.assign({className:l.input,error:a,helperText:a,label:o,fullWidth:!0,required:!0,variant:"outlined",type:i},r))},te=Object(s.a)((function(e){return{submit:{margin:e.spacing(3,0,2),backgroundColor:"#e4b61a","&:hover":{backgroundColor:"#2c3258"}}}})),ae=function(e){var t=e.disable,a=e.name,r=te();return n.a.createElement(f.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:r.submit,disabled:t},a)},re=a(215),ne=a(221),ie=a(128),oe=a.n(ie),le=a(214),ce=Object(s.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:"#2c3258"},form:{width:"100%",marginTop:e.spacing(3)}}})),se=function(e){var t=e.onsubmit,a=e.children,r=e.title;var i=ce();return n.a.createElement(le.a,{component:"main",maxWidth:"xs"},n.a.createElement(re.a,null),n.a.createElement("div",{className:i.paper},n.a.createElement(ne.a,{className:i.avatar},n.a.createElement(oe.a,null)),n.a.createElement(p.a,{component:"h1",variant:"h5"},r),n.a.createElement("form",{className:i.form,onSubmit:function(){t()}},n.a.createElement(U.a,{container:!0,spacing:2},n.a.createElement(U.a,{item:!0,xs:12},a)))))},ue=function(){var e=Object(l.b)(),t=Object(O.a)({validateOnBlur:!0,validateOnChange:!1,validate:function(e){return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)?void 0:{email:"Invalid email address"}:{email:"Email is required"}},initialValues:{email:""},onSubmit:function(t){var a=t.email;e(function(e){return function(t){t(J(!0)),T(e).then((function(e){t($(e.data.success)),t(Z("")),t(J(!1))})).catch((function(e){var a=e.response,r=(a.request,Object(z.a)(a,["request"]));return t($(!1)),t(J(!1)),t(Z(r.data.error))}))}}(a.trim()))}}),a=Object(l.c)((function(e){return e.pwRecoveryRequest.error})),r=(Object(l.c)((function(e){return e.pwRecoveryRequest.success})),Object(l.c)((function(e){return e.pwRecoveryRequest.loading})));return n.a.createElement(se,{onsubmit:t.handleSubmit,title:"Reset password"},t.errors.email?n.a.createElement("div",null,t.errors.email):null,a?n.a.createElement("div",null,a):null,n.a.createElement(ee,{error:!!t.errors.email,formik:Object(R.a)({},t.getFieldProps("email")),type:"email",label:"Enter your email"}),n.a.createElement(ae,{name:"Send",disable:r}))},me=a(74),de={error:"",success:!1,loading:!1},pe=function(e){return{type:"pwCreation/SET_SUCCESS",success:e}},be=function(e){return{type:"pwCreation/SET_LOADING",loading:e}},fe=function(e){return{type:"pwCreation/SET_ERROR",error:e}},Ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"pwCreation/SET_SUCCESS":return Object(R.a)({},e,{success:t.success});case"pwCreation/SET_LOADING":return Object(R.a)({},e,{loading:t.loading});case"pwCreation/SET_ERROR":return Object(R.a)({},e,{error:t.error});default:return e}},ge=function(){var e=me.a().shape({password:me.c().required("This field is required"),changepassword:me.c().when("password",{is:function(e){return!!(e&&e.length>0)},then:me.c().oneOf([me.b("password")],"Both password need to be the same")})}),t=Object(w.f)().token,a=Object(l.b)(),r=Object(O.a)({validateOnBlur:!0,validateOnChange:!1,initialValues:{password:"",changepassword:""},validationSchema:e,onSubmit:function(e){var r=e.password;a(function(e,t){return function(a){a(be(!0)),A(e,t).then((function(e){200===e.status&&(a(pe(!0)),a(fe("")),a(be(!1)))})).catch((function(e){var t=e.response,r=(t.request,Object(z.a)(t,["request"]));return a(pe(!1)),a(be(!1)),a(fe(r.data.error))}))}}(r,t))}}),i=Object(l.c)((function(e){return e.passwordUpdate.error})),o=Object(l.c)((function(e){return e.passwordUpdate.success})),c=Object(l.c)((function(e){return e.passwordUpdate.loading}));return o?(window.confirm("Your password has been changed!"),n.a.createElement(w.a,{to:"/login"})):n.a.createElement(se,{onsubmit:r.handleSubmit,title:"Set new password"},r.errors.password?n.a.createElement("div",null,r.errors.password):null,i?n.a.createElement("div",null,i):null,n.a.createElement(ee,{error:!!r.errors.password,formik:Object(R.a)({},r.getFieldProps("password")),type:"password",label:"Enter new password"}),r.errors.changepassword?n.a.createElement("div",null,r.errors.changepassword):null,n.a.createElement(ee,{error:!!r.errors.changepassword,formik:Object(R.a)({},r.getFieldProps("changepassword")),type:"password",label:"Confirm new password"}),n.a.createElement(ae,{name:"Send",disable:c}))},ve=a(106),he=a.n(ve),we=function(){var e=Object(l.c)((function(e){return e.login.isAuth})),t=Object(l.c)((function(e){return e.login.userProfile})),a=t.email,r=t.name,i=t.avatar,o=t.publicCardPacksCount,c=t.created,s=Object(l.b)();if(!e)return n.a.createElement(w.a,{to:"/login"});return n.a.createElement("div",{className:he.a.profileBlock},n.a.createElement("div",{className:he.a.profileHeader},n.a.createElement("div",{className:"container"},n.a.createElement("div",null,"Profile ",r),n.a.createElement("div",null,"Profile email ",a),n.a.createElement("div",null,"Profile avatar ",i),n.a.createElement("div",null,"Profile publicCardPacksCount ",o),n.a.createElement("div",null,"Profile created ",c),n.a.createElement("button",{type:"submit",onClick:function(){s((function(e){I().then((function(t){"logOut success \u2014\u0e05/\u1420.\u032b .\u141f\\\u0e05\u2014"===t.data.info&&e({type:"login/LOGOUT"})}))}))}},"Log out"))))};var Oe=function(){return n.a.createElement("div",{className:"App"},n.a.createElement("header",null,n.a.createElement(h,null)),n.a.createElement(w.b,{path:"/profile/:userId?",render:function(){return n.a.createElement(we,null)}}),n.a.createElement(w.b,{path:"/login",render:function(){return n.a.createElement(M,null)}}),n.a.createElement(w.b,{path:"/register",render:function(){return n.a.createElement(W,null)}}),n.a.createElement(w.b,{path:"/passwordRecovery",render:function(){return n.a.createElement(ue,null)}}),n.a.createElement(w.b,{path:"/set-new-password/:token?",render:function(){return n.a.createElement(ge,null)}}))},ye=a(70),je=a(130),Se={isInitialized:!1},Re=Object(ye.c)({register:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"register/SET-IS-REGISTERED":return Object(R.a)({},e,{isRegistered:t.value});default:return e}},pwRecoveryRequest:H,passwordUpdate:Ee,login:D,app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"APP/INITIALIZE-APP":return Object(R.a)({},e,{isInitialized:t.isInitialized});default:return Object(R.a)({},e)}}}),Ce=Object(ye.d)(Re,Object(ye.a)(je.a));window.store=Ce,o.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(c.a,null,n.a.createElement(l.a,{store:Ce},n.a.createElement(Oe,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[140,1,2]]]);
//# sourceMappingURL=main.77e41adc.chunk.js.map