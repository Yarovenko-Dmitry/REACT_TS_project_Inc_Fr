(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{129:function(e,t,a){e.exports=a(159)},134:function(e,t,a){},138:function(e,t,a){},159:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(7),s=a.n(o);a(134),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var c=a(16),i=a(29),l=(a(138),a(30)),u=a.n(l),m=function(){return n.a.createElement("nav",null,n.a.createElement(i.b,{to:"/profile",className:u.a.btn,activeClassName:u.a.active},"profile"),n.a.createElement(i.b,{to:"/login",className:u.a.btn,activeClassName:u.a.active},"login"),n.a.createElement(i.b,{to:"/register",className:u.a.btn,activeClassName:u.a.active},"registration"),n.a.createElement(i.b,{to:"/passwordRecovery",className:u.a.btn,activeClassName:u.a.active},"recovery"),n.a.createElement(i.b,{to:"/set-new-password",className:u.a.btn,activeClassName:u.a.active},"create a new pw"))},d=a(10),p=function(){return n.a.createElement("div",null,"ProfileContainer")},b=a(42),E=a(68),v=a(17),w=a(117),f=a.n(w).a.create({withCredentials:!0,baseURL:"https://neko-back.herokuapp.com/2.0"}),h=function(e){return f.post("/auth/forgot/",{email:e,from:"password-reset-server <noreply@noreply.it>",message:"\n\t\t\t\t\t<div style=\"background-color: lime; padding: 15px\">\n\t\t\t\t\tpassword recovery link: \n\t\t\t\t\t<a href='http://localhost:3000/#/set-new-password/$token$'>link</a>\n\t\t\t\t\t</div>\n\t\t\t\t\t"})},g=function(e,t){return f.post("/auth/set-new-password",{password:e,resetPasswordToken:t})},S=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return f.post("auth/login",{email:e,password:t,rememberMe:a})},y=function(e){return f.post("/auth/register",Object(v.a)({},e))},O={_id:"",email:"",name:"",avatar:"",publicCardPacksCount:0,created:"",updated:"",isAdmin:!1,verified:!1,rememberMe:!1,error:""},_=function(e){return{type:"login/SET_USER_DATA",data:e}},R=function(e){return{type:"login/SET_LOADING",loading:e}},j=function(e){return{type:"login/SET_ERROR",error:e}},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"login/SET_USER_DATA":return Object(v.a)({},t.data);case"login/SET_LOADING":return Object(v.a)({},e,{loading:t.loading});case"login/SET_ERROR":return Object(v.a)({},e,{error:t.error});default:return e}},N=function(){var e=Object(c.c)((function(e){return e.login.email}));return n.a.createElement("div",null,"LoginPage",e,n.a.createElement(T,null))},T=function(){var e=Object(c.b)(),t=Object(b.a)({initialValues:{email:"",password:"",rememberMe:!1},onSubmit:function(t){var a=t.email,r=t.password,n=t.rememberMe;e(function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(r){S(e,t,a).then((function(e){r(_(e.data))})).catch((function(e){var t=e.response,a=(t.request,Object(E.a)(t,["request"]));return r(R(!1)),r(j(a.data.error))}))}}(a,r,n)),console.log(JSON.stringify(t,null,2))}});return n.a.createElement("form",{onSubmit:t.handleSubmit},n.a.createElement("label",{htmlFor:"email"},"Email Address"),n.a.createElement("input",{id:"email",name:"email",type:"email",onChange:t.handleChange,value:t.values.email}),n.a.createElement("label",{htmlFor:"password"},"password"),n.a.createElement("input",{id:"password",name:"password",type:"password",onChange:t.handleChange,value:t.values.password}),n.a.createElement("label",{htmlFor:"rememberMe"},"rememberMe"),n.a.createElement("input",{id:"rememberMe",name:"rememberMe",type:"checkbox",onChange:t.handleChange,value:t.values.rememberMe}),n.a.createElement("button",{type:"submit"},"Submit"))},k=a(188),q=a(196),P=a(192),A=a(193),I=a(194),U=a(195),D=a(101),x=a.n(D),L=a(118),M={isRegistered:!1},G=function(){var e=Object(c.b)(),t=Object(c.c)((function(e){return e.register.isRegistered})),a=Object(b.a)({validate:function(e){},initialValues:{email:"",password:""},onSubmit:function(t){var a;e((a=t,function(){var e=Object(L.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y(a);case 3:e.sent,t({type:"register/SET-IS-REGISTERED",value:!0}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}});return t?n.a.createElement(d.a,{to:"/login"}):n.a.createElement(k.a,{container:!0,justify:"center"},n.a.createElement(k.a,{item:!0,xs:4},n.a.createElement("form",{onSubmit:a.handleSubmit},n.a.createElement(q.a,null,n.a.createElement(P.a,null,n.a.createElement("p",null,"Registration")),n.a.createElement(A.a,null,n.a.createElement(I.a,Object.assign({label:"Email",margin:"normal"},a.getFieldProps("email"))),n.a.createElement(I.a,Object.assign({type:"password",label:"Password",margin:"normal"},a.getFieldProps("password"))),n.a.createElement(U.a,{type:"submit",variant:"contained",color:"primary"},"Register"))))))},B=a(56),F=a.n(B),J={error:"",success:!1,loading:!1},V=function(e){return{type:"pwRecovery/SET_ERROR",error:e}},$=function(e){return{type:"pwRecovery/SET_SUCCESS",success:e}},W=function(e){return{type:"pwRecovery/SET_LOADING",loading:e}},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"pwRecovery/SET_ERROR":return Object(v.a)({},e,{error:t.error});case"pwRecovery/SET_SUCCESS":return Object(v.a)({},e,{success:t.success});case"pwRecovery/SET_LOADING":return Object(v.a)({},e,{loading:t.loading});default:return e}},K=function(){var e=Object(c.b)(),t=Object(c.c)((function(e){return e.pwRecoveryRequest.error})),a=Object(c.c)((function(e){return e.pwRecoveryRequest.success})),r=Object(c.c)((function(e){return e.pwRecoveryRequest.loading})),o=Object(b.a)({initialValues:{email:""},onSubmit:function(t){var a=t.email;e(function(e){return function(t){t(W(!0)),h(e).then((function(e){t($(e.data.success)),t(V("")),t(W(!1))})).catch((function(e){var a=e.response,r=(a.request,Object(E.a)(a,["request"]));return t($(!1)),t(W(!1)),t(V(r.data.error))}))}}(a.trim()))}});return n.a.createElement("section",null,n.a.createElement("div",{className:F.a.container},n.a.createElement("div",{className:F.a.wrapper},n.a.createElement("div",{className:F.a.form},n.a.createElement("h1",null,"Forgot password?"),n.a.createElement("form",{onSubmit:o.handleSubmit},n.a.createElement("div",{className:F.a.error},t),a&&n.a.createElement("div",{className:F.a.success},"An email with further instructions has been sent to the address provided. Please check your email!"),n.a.createElement("input",Object.assign({type:"email",required:!0,placeholder:"Enter your email"},o.getFieldProps("email"))),n.a.createElement("button",{disabled:r,className:F.a.btn},"Send"))))))},Y=a(57),H=a.n(Y),Q=a(74),X={error:"",success:!1,loading:!1},Z=function(e){return{type:"pwCreation/SET_SUCCESS",success:e}},ee=function(e){return{type:"pwCreation/SET_LOADING",loading:e}},te=function(e){return{type:"pwCreation/SET_ERROR",error:e}},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"pwCreation/SET_SUCCESS":return Object(v.a)({},e,{success:t.success});case"pwCreation/SET_LOADING":return Object(v.a)({},e,{loading:t.loading});case"pwCreation/SET_ERROR":return Object(v.a)({},e,{error:t.error});default:return e}},re=Q.a().shape({password:Q.c().required("This field is required"),changepassword:Q.c().when("password",{is:function(e){return!!(e&&e.length>0)},then:Q.c().oneOf([Q.b("password")],"Both password need to be the same")})}),ne=function(){var e=Object(c.c)((function(e){return e.passwordUpdate.error})),t=Object(c.c)((function(e){return e.passwordUpdate.success})),a=Object(c.c)((function(e){return e.passwordUpdate.loading})),r=Object(d.f)().token,o=Object(c.b)(),s=Object(b.a)({initialValues:{password:"",changepassword:""},validationSchema:re,onSubmit:function(e){var t=e.password;o(function(e,t){return function(a){a(ee(!0)),g(e,t).then((function(e){200===e.status&&(a(Z(!0)),a(te("")),a(ee(!1)))})).catch((function(e){var t=e.response,r=(t.request,Object(E.a)(t,["request"]));return a(Z(!1)),a(ee(!1)),a(te(r.data.error))}))}}(t,r))}});return t?(window.confirm("Your password has been changed!"),n.a.createElement(d.a,{to:"/"})):n.a.createElement("section",null,n.a.createElement("div",{className:H.a.container},n.a.createElement("div",{className:H.a.wrapper},n.a.createElement("div",{className:H.a.form},n.a.createElement("h1",null,"Set new password"),n.a.createElement("form",{onSubmit:s.handleSubmit},n.a.createElement("div",{className:H.a.error},s.errors.changepassword),n.a.createElement("div",{className:H.a.error},e),n.a.createElement("span",{className:"error",style:{color:"red"}},s.errors.password),n.a.createElement("input",{placeholder:"Enter new password",required:!0,type:"password",name:"password",onBlur:s.handleBlur,onChange:s.handleChange,value:s.values.password}),n.a.createElement("span",{className:"error",style:{color:"red"}},s.errors.password),n.a.createElement("input",{placeholder:"Confirm Password",required:!0,type:"password",name:"changepassword",onBlur:s.handleBlur,onChange:s.handleChange,value:s.values.changepassword}),n.a.createElement("button",{disabled:a||s.errors.changepassword||s.errors.password,className:H.a.btn},"Send"))))))};var oe=function(){return n.a.createElement("div",{className:"App"},n.a.createElement("header",null,n.a.createElement(m,null)),n.a.createElement(d.b,{path:"/profile/:userId?",render:function(){return n.a.createElement(p,null)}}),n.a.createElement(d.b,{path:"/login",render:function(){return n.a.createElement(N,null)}}),n.a.createElement(d.b,{path:"/register",render:function(){return n.a.createElement(G,null)}}),n.a.createElement(d.b,{path:"/passwordRecovery",render:function(){return n.a.createElement(K,null)}}),n.a.createElement(d.b,{path:"/set-new-password/:token?",render:function(){return n.a.createElement(ne,null)}}))},se=a(71),ce=a(123),ie=Object(se.c)({register:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"register/SET-IS-REGISTERED":return Object(v.a)({},e,{isRegistered:t.value});default:return e}},pwRecoveryRequest:z,passwordUpdate:ae,login:C}),le=Object(se.d)(ie,Object(se.a)(ce.a));window.store=le,s.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(i.a,null,n.a.createElement(c.a,{store:le},n.a.createElement(oe,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},30:function(e,t,a){e.exports={btn:"Navbar_btn__2LLvD",active:"Navbar_active__1q7UT"}},56:function(e,t,a){e.exports={form:"recoveryPage_form__90bKw",btn:"recoveryPage_btn__3mJme",error:"recoveryPage_error__13rTi",success:"recoveryPage_success__2budS"}},57:function(e,t,a){e.exports={form:"passwordCreation_form__2d75P",btn:"passwordCreation_btn__1hty7",error:"passwordCreation_error__2_fJR",success:"passwordCreation_success__3qztO"}}},[[129,1,2]]]);
//# sourceMappingURL=main.5af70843.chunk.js.map